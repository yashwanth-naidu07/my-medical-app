<!DOCTYPE html>
<html lang="en">
<head>
    <link rel="manifest" href="manifest.json">
<script>
  if ('serviceWorker' in navigator) {
    navigator.serviceWorker.register('sw.js')
      .then(() => console.log("PWA Registered Successfully"));
  }
</script>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>MedDash | Access Portal</title>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0/css/all.min.css">
    <script src="https://unpkg.com/lucide@latest"></script>
    <style>
        /* --- GLOBAL STYLES --- */
        * { box-sizing: border-box; font-family: 'Inter', sans-serif; }
        body {
            background-color: #f3f4f6;
            display: flex;
            justify-content: center;
            align-items: center;
            min-height: 100vh;
            margin: 0;
        }

        .login-card {
            background: white;
            width: 90%;
            max-width: 950px;
            display: flex;
            border-radius: 30px;
            box-shadow: 0 25px 50px -12px rgba(0, 0, 0, 0.1);
            overflow: hidden;
            min-height: 650px;
        }

        /* LEFT BRANDING */
        .branding-side {
            width: 50%;
            background: linear-gradient(135deg, #2563eb 0%, #3b82f6 40%, #06b6d4 100%);
            padding: 50px;
            color: white;
            display: flex;
            flex-direction: column;
            justify-content: space-between;
        }

        /* RIGHT FORM SIDE */
        .form-side { width: 50%; padding: 50px; display: flex; flex-direction: column; justify-content: center; position: relative; }
        
        .form-view { display: none; }
        .form-view.active { display: block; animation: fadeIn 0.3s ease; }

        @keyframes fadeIn { from { opacity: 0; transform: translateY(10px); } to { opacity: 1; transform: translateY(0); } }

        h2 { font-size: 2rem; margin: 0 0 10px 0; }
        .form-subtitle { color: #6b7280; margin-bottom: 30px; font-size: 0.95rem; }

        .input-group { margin-bottom: 20px; }
        .input-group label { display: block; font-size: 0.85rem; font-weight: 600; margin-bottom: 6px; }
        .label-row { display: flex; justify-content: space-between; align-items: center; }

        input, select {
            width: 100%; padding: 12px; border: 1px solid #d1d5db;
            border-radius: 10px; outline: none; transition: 0.2s; font-size: 0.95rem;
        }
        input:focus { border-color: #3b82f6; box-shadow: 0 0 0 3px rgba(59, 130, 246, 0.1); }

        /* BUTTONS */
        .btn-main {
            width: 100%; background: #4338ca; color: white; border: none;
            padding: 14px; border-radius: 10px; font-weight: 600; cursor: pointer;
            display: flex; align-items: center; justify-content: center; gap: 10px;
            transition: all 0.1s ease; margin-top: 10px;
        }
        .btn-main:active { transform: scale(0.96); background: #3730a3; }
        .btn-icon { width: 18px; transition: transform 0.2s; }
        .btn-main:hover .btn-icon { transform: translateX(5px); }

        .link-text { color: #4338ca; text-decoration: none; font-weight: 600; font-size: 0.85rem; cursor: pointer; }
        .link-text:hover { text-decoration: underline; }

        .form-footer { text-align: center; margin-top: 25px; font-size: 0.9rem; color: #6b7280; }

        .divider { display: flex; align-items: center; margin: 25px 0; color: #9ca3af; font-size: 0.75rem; text-transform: uppercase; }
        .divider::after, .divider::before { content: ""; flex: 1; border-bottom: 1px solid #e5e7eb; margin: 0 10px; }

        .social-grid { display: grid; grid-template-columns: 1fr 1fr; gap: 12px; }
        .social-btn { border: 1px solid #e5e7eb; background: white; padding: 10px; border-radius: 10px; cursor: pointer; display: flex; align-items: center; justify-content: center; gap: 8px; font-weight: 600; }
    </style>
</head>
<body>

    <div class="login-card">
        <div class="branding-side">
            <div>
                <p style="opacity:0.8; margin-bottom: 5px;">You can easily</p>
                <h1 style="font-size:2.5rem; margin:0; line-height: 1.2;">Speed up your work<br>with our Web App</h1>
            </div>
            <div style="display:flex; justify-content:space-between; font-size:0.8rem; opacity:0.7">
                <span>Discord</span><span>Instagram</span><span>Spotify</span>
            </div>
        </div>

        <div class="form-side">
            
            <div id="login-view" class="form-view active">
                <h2>Get Started Now</h2>
                <p class="form-subtitle">Log in to your account to continue.</p>
                
                <form id="loginForm">
                    <div class="input-group">
                        <label>Email address</label>
                        <input type="email" id="loginEmail" placeholder="name@email.com" required>
                    </div>
                    
                    <div class="input-group">
                        <div class="label-row">
                            <label>Password</label>
                            <span class="link-text" onclick="showView('forgot-view')">Forgot Password?</span>
                        </div>
                        <input type="password" id="loginPass" placeholder="••••••••" required>
                    </div>

                    <div class="input-group">
                        <label>Portal Role</label>
                        <select id="role" required>
                            <option value="" disabled selected>Select Role</option>
                            <option value="patient">Patient</option>
                            <option value="doctor">Doctor</option>
                        </select>
                    </div>

                    <button type="submit" class="btn-main">
                        <span>Log in</span>
                        <i data-lucide="arrow-right" class="btn-icon"></i>
                    </button>
                </form>

                <div class="divider">Or</div>
                <div class="social-grid">
                    <button class="social-btn"><img src="https://www.svgrepo.com/show/355037/google.svg" width="16"> Google</button>
                    <button class="social-btn"><i class="fab fa-apple"></i> Apple</button>
                </div>
                <p class="form-footer">Don't have an account? <span class="link-text" onclick="showView('register-view')">Sign up</span></p>
            </div>

            <div id="register-view" class="form-view">
                <h2>Create Account</h2>
                <p class="form-subtitle">Join us and manage your health digitally.</p>
                
                <form id="registerForm">
                    <div class="input-group">
                        <label>Full Name</label>
                        <input type="text" placeholder="John Doe" required>
                    </div>
                    <div class="input-group">
                        <label>Email address</label>
                        <input type="email" placeholder="name@email.com" required>
                    </div>
                    <div class="input-group">
                        <label>Create Password</label>
                        <input type="password" placeholder="••••••••" required>
                    </div>
                    <button type="submit" class="btn-main">
                        <span>Register Now</span>
                        <i data-lucide="arrow-right" class="btn-icon"></i>
                    </button>
                </form>
                <p class="form-footer">Already have an account? <span class="link-text" onclick="showView('login-view')">Log in</span></p>
            </div>

            <div id="forgot-view" class="form-view">
                <h2>Reset Password</h2>
                <p class="form-subtitle">Enter your email and we'll send you a link to reset your password.</p>
                
                <form id="forgotForm">
                    <div class="input-group">
                        <label>Email address</label>
                        <input type="email" placeholder="name@email.com" required>
                    </div>
                    <button type="submit" class="btn-main">
                        <span>Send Reset Link</span>
                        <i data-lucide="send" class="btn-icon" style="width: 16px;"></i>
                    </button>
                </form>
                <p class="form-footer">Remembered your password? <span class="link-text" onclick="showView('login-view')">Back to Login</span></p>
            </div>

        </div>
    </div>

    <script>
        lucide.createIcons();

        // --- VIEW SWITCHER ---
        function showView(viewId) {
            // Hide all views
            document.querySelectorAll('.form-view').forEach(view => {
                view.classList.remove('active');
            });
            // Show requested view
            document.getElementById(viewId).classList.add('active');
        }

        // --- PREVENT BACK TO LOGIN IF LOGGED IN ---
        window.onload = () => {
            if (localStorage.getItem('userRole')) {
                const role = localStorage.getItem('userRole');
                window.location.replace(role === 'patient' ? 'patientdashboard.html' : 'doctordashboard.html');
            }
        };

        // --- LOGIN HANDLER ---
        document.getElementById('loginForm').onsubmit = (e) => {
            e.preventDefault();
            const role = document.getElementById('role').value;
            localStorage.setItem('userRole', role);
            window.location.replace(role === 'patient' ? 'patientdashboard.html' : 'doctordashboard.html');
        };

        // --- PREVENT DEFAULT FOR OTHER FORMS ---
        document.getElementById('registerForm').onsubmit = (e) => { e.preventDefault(); alert('Account created! Please log in.'); showView('login-view'); };
        document.getElementById('forgotForm').onsubmit = (e) => { e.preventDefault(); alert('Reset link sent to your email!'); showView('login-view'); };
    </script>
    
</body>
</html>